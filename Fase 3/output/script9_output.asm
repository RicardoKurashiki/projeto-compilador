#define __SFR_OFFSET 0
#include "avr/io.h"
.global hwSetup

hwSetup:
CBI DDRD, 2
SBI DDRB, 5
SBI DDRD, 3
SBI DDRD, 4
SBI DDRD, 5
SBI DDRD, 6
SBI DDRD, 7
SBI DDRB, 0
SBI DDRB, 1

main:
LDI R24, 0
STS 0x400, R24
LDI R22, 0
STS 0x404, R22
LDI R20, 0
STS 0x408, R20
JMP while_1
endwhile_1:
RET

while_1:
LDI R30, 1
LDI R21, 1
CP R30, R21
BRNE endwhile_1
SBIS PIND, 2
LDI R20, 0
SBIC PIND, 2
LDI R20, 1
STS 0x404, R20
LDS R20, 0x404
LDI R16, 0
CPSE R20, R16
SBI PORTB, 5
LDI R16, 1
CPSE R20, R16
CBI PORTB, 5
LDS R24, 0x404
LDI R23, 1
CP R24, R23
BREQ if_1
endif_1:
LDS R24, 0x400
LDI R17, 1
CP R24, R17
BREQ if_2_1
LDS R27, 0x400
LDI R26, 2
CP R27, R26
BREQ elseif_2_1b
LDS R18, 0x400
LDI R27, 3
CP R18, R27
BREQ elseif_2_1c
JMP else_2_1
endif_2_1:
LDS R18, 0x404
STS 0x408, R18
JMP while_1

if_1:
LDS R17, 0x408
LDI R31, 0
CP R17, R31
BREQ if_1_1
endif_1_1:
JMP endif_1

if_1_1:
LDS R16, 0x400
LDI R26, 1
ADD R16, R26
STS 0x400, R16
JMP endif_1_1

if_2_1:
SBI PORTD, 3
CBI PORTD, 4
CBI PORTD, 5
SBI PORTD, 6
SBI PORTD, 7
SBI PORTB, 0
SBI PORTB, 1
JMP endif_2_1

elseif_2_1b:
CBI PORTD, 3
CBI PORTD, 4
SBI PORTD, 5
CBI PORTD, 6
CBI PORTD, 7
SBI PORTB, 0
CBI PORTB, 1
JMP endif_2_1

elseif_2_1c:
CBI PORTD, 3
CBI PORTD, 4
CBI PORTD, 5
CBI PORTD, 6
SBI PORTD, 7
SBI PORTB, 0
CBI PORTB, 1
JMP endif_2_1

else_2_1:
LDI R27, 1
STS 0x400, R27
JMP endif_2_1
