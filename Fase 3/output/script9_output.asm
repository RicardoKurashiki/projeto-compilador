#define __SFR_OFFSET 0
#include "avr/io.h"
.global hwSetup

hwSetup:
CBI DDRD, 2
SBI DDRB, 5
CBI DDRD, 3
CBI DDRD, 4
CBI DDRD, 5
CBI DDRD, 6
CBI DDRD, 7
CBI DDRB, 0
CBI DDRB, 1

main:
LDI R30, 0
STS 0x400, R30
LDI R24, 0
STS 0x404, R24
LDI R19, 0
STS 0x408, R19
JMP while_1
endwhile_1:
RET

while_1:
LDI R31, 1
LDI R29, 1
CP R31, R29
BRNE endwhile_1
SBIS PIND, 2
LDI R28, 0
SBIC PIND, 2
LDI R28, 1
STS 0x404, R28
LDS R17, 0x404
LDI R29, 0
CPSE R17, R29
SBI PORTB, 5
LDI R29, 1
CPSE R17, R29
CBI PORTB, 5
LDS R27, 0x404
LDI R25, 1
CP R27, R25
BREQ if_1
endif_1:
LDS R24, 0x400
LDI R18, 1
CP R24, R18
BREQ if_2_1
LDS R22, 0x400
LDI R20, 2
CP R22, R20
BREQ elseif_2_1b
LDS R27, 0x400
LDI R28, 3
CP R27, R28
BREQ elseif_2_1c
JMP else_2_1
endif_2_1:
LDS R28, 0x404
STS 0x408, R28
JMP while_1

if_1:
LDS R29, 0x408
LDI R30, 0
CP R29, R30
BREQ if_1_1
endif_1_1:
JMP endif_1

if_1_1:
LDS R23, 0x400
LDI R28, 1
ADD R23, R28
STS 0x400, R23
JMP endif_1_1

if_2_1:
CBI PORTD, 3
SBI PORTD, 4
SBI PORTD, 5
CBI PORTD, 6
CBI PORTD, 7
CBI PORTB, 0
CBI PORTB, 1
JMP endif_2_1

elseif_2_1b:
SBI PORTD, 3
SBI PORTD, 4
CBI PORTD, 5
SBI PORTD, 6
SBI PORTD, 7
CBI PORTB, 0
SBI PORTB, 1
JMP endif_2_1

elseif_2_1c:
SBI PORTD, 3
SBI PORTD, 4
SBI PORTD, 5
SBI PORTD, 6
CBI PORTD, 7
CBI PORTB, 0
SBI PORTB, 1
JMP endif_2_1

else_2_1:
LDI R25, 1
STS 0x400, R25
JMP endif_2_1
